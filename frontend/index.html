<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Invoice Guard - Track invoice payments and manage client reminders for Indian freelancers">
  <meta name="theme-color" content="#1E40AF">
  <title>Invoice Guard - Invoice Tracking for Freelancers</title>
  
  <!-- Web App Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%231E40AF'/><text x='50' y='70' font-size='60' text-anchor='middle' fill='white' font-family='Arial, sans-serif' font-weight='bold'>â‚¹</text></svg>">
  
  <!-- Skip to main content link for keyboard navigation -->
  <style>
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #1E40AF;
      color: white;
      padding: 8px;
      text-decoration: none;
      z-index: 100;
    }
    .skip-link:focus {
      top: 0;
    }
  </style>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#1E40AF',
            success: '#10B981',
            warning: '#F59E0B',
            danger: '#EF4444'
          }
        }
      }
    }
  </script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/premium-ui.css">
  <link rel="stylesheet" href="css/dark-premium.css">
</head>
<body class="bg-gray-50 min-h-screen">
  
  <!-- Skip to main content link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <!-- Header -->
  <header class="bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-xl" role="banner">
    <div class="container mx-auto px-4 py-5">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="bg-white/10 p-2 rounded-lg backdrop-blur-sm">
            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-bold tracking-tight">Invoice Guard</h1>
            <p class="text-xs text-blue-100 opacity-90">Track. Remind. Get Paid.</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button 
            id="themeToggle" 
            class="p-2.5 hover:bg-white/10 rounded-lg transition-all duration-200 hover:scale-105"
            aria-label="Toggle dark mode"
            title="Toggle theme">
            <svg class="w-5 h-5 sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            <svg class="w-5 h-5 moon-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
          </button>
          <button 
            id="reminderHistoryBtn" 
            class="p-2.5 hover:bg-white/10 rounded-lg transition-all duration-200 hover:scale-105"
            aria-label="Reminder History"
            title="Reminder History">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
          <button 
            id="costDashboardBtn" 
            class="p-2.5 hover:bg-white/10 rounded-lg transition-all duration-200 hover:scale-105"
            aria-label="Cost Dashboard"
            title="Cost Dashboard">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
          <button 
            id="testPreviewBtn" 
            class="p-2.5 hover:bg-white/10 rounded-lg transition-all duration-200 hover:scale-105"
            aria-label="Test & Preview"
            title="Test & Preview">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
            </svg>
          </button>
          <button 
            id="serviceConfigBtn" 
            class="p-2.5 hover:bg-white/10 rounded-lg transition-all duration-200 hover:scale-105"
            aria-label="Service Configuration"
            title="Service Configuration">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
            </svg>
          </button>
          <button 
            id="settingsBtn" 
            class="p-2.5 hover:bg-white/10 rounded-lg transition-all duration-200 hover:scale-105"
            aria-label="Settings"
            title="Settings">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main id="main-content" class="container mx-auto px-4 py-6 sm:py-8" role="main">
    
    <!-- Summary Cards Section -->
    <section id="summarySection" class="mb-8" aria-labelledby="summary-heading">
      <h2 id="summary-heading" class="sr-only">Financial Summary</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
        
        <!-- Total Outstanding Card -->
        <article class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover:shadow-xl transition-all transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700" aria-labelledby="total-outstanding-label">
          <h3 id="total-outstanding-label" class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">Total Outstanding</h3>
          <p id="totalOutstanding" class="text-3xl font-bold text-gray-900 dark:text-white" aria-live="polite">â‚¹0</p>
          <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">Unpaid invoices</p>
        </article>

        <!-- Overdue Amount Card -->
        <article class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover:shadow-xl transition-all transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700" aria-labelledby="overdue-amount-label">
          <h3 id="overdue-amount-label" class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">Overdue Amount</h3>
          <p id="overdueAmount" class="text-3xl font-bold text-red-600 dark:text-red-400" aria-live="polite">â‚¹0</p>
          <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">Past due date</p>
        </article>

        <!-- Due This Week Card -->
        <article class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 hover:shadow-xl transition-all transform hover:-translate-y-1 sm:col-span-2 lg:col-span-1 border border-gray-200 dark:border-gray-700" aria-labelledby="due-this-week-label">
          <h3 id="due-this-week-label" class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-2">Due This Week</h3>
          <p id="dueThisWeek" class="text-3xl font-bold text-amber-600 dark:text-amber-400" aria-live="polite">0</p>
          <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">Next 7 days</p>
        </article>

      </div>
    </section>

    <!-- Action Bar -->
    <section class="mb-6">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <div>
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Your Invoices</h2>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Manage and track all your payments</p>
        </div>
        <div class="flex gap-3 w-full sm:w-auto">
          <button 
            id="exportBtn" 
            class="flex-1 sm:flex-none bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-4 py-2.5 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-all border border-gray-200 dark:border-gray-700 flex items-center justify-center gap-2 hover:shadow-md"
            aria-label="Export data"
            title="Export your data">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
            </svg>
            <span class="hidden sm:inline">Export</span>
          </button>
          <button 
            id="addInvoiceBtn" 
            class="flex-1 sm:flex-none bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2.5 rounded-lg font-medium hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 transform hover:scale-105"
            aria-label="Add new invoice">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            <span>New Invoice</span>
          </button>
        </div>
      </div>

      <!-- Search and Filter Bar -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-5 space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <!-- Search -->
          <div class="md:col-span-2">
            <label for="searchInput" class="sr-only">Search invoices</label>
            <div class="relative group">
              <input 
                type="text" 
                id="searchInput" 
                placeholder="Search invoices..."
                class="w-full pl-11 pr-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all"
                aria-label="Search invoices">
              <svg class="absolute left-3.5 top-3 w-5 h-5 text-gray-400 group-focus-within:text-blue-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
            </div>
          </div>

          <!-- Status Filter -->
          <div>
            <label for="statusFilter" class="sr-only">Filter by status</label>
            <select 
              id="statusFilter" 
              class="w-full px-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-all appearance-none bg-no-repeat bg-right pr-10"
              style="background-image: url('data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 24 24%27 stroke=%27%239CA3AF%27%3E%3Cpath stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M19 9l-7 7-7-7%27/%3E%3C/svg%3E'); background-size: 1.5em; background-position: right 0.5rem center;"
              aria-label="Filter by status">
              <option value="all">All Invoices</option>
              <option value="pending">â³ Pending</option>
              <option value="overdue">ğŸ”´ Overdue</option>
              <option value="due-soon">âš ï¸ Due Soon</option>
              <option value="not-due">âœ… Not Due</option>
              <option value="paid">ğŸ’° Paid</option>
            </select>
          </div>
        </div>

        <!-- Sort Options -->
        <div class="flex flex-wrap gap-2 items-center pt-2 border-t border-gray-100 dark:border-gray-700">
          <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Sort:</span>
          <button class="sort-btn px-3 py-1.5 text-sm rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 transition-all dark:text-gray-300" data-sort="dueDate">ğŸ“… Due Date</button>
          <button class="sort-btn px-3 py-1.5 text-sm rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 transition-all dark:text-gray-300" data-sort="amount">ğŸ’µ Amount</button>
          <button class="sort-btn px-3 py-1.5 text-sm rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 transition-all dark:text-gray-300" data-sort="client">ğŸ‘¤ Client</button>
          <button class="sort-btn px-3 py-1.5 text-sm rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-300 dark:hover:border-blue-500 transition-all dark:text-gray-300" data-sort="status">ğŸ“Š Status</button>
          <button id="clearFiltersBtn" class="ml-auto px-3 py-1.5 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-all font-medium">Clear All</button>
        </div>
      </div>
    </section>

    <!-- Invoices Table Section -->
    <section id="invoicesSection" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700" aria-labelledby="invoices-heading">
      <h2 id="invoices-heading" class="sr-only">Invoice list</h2>
      <div class="table-responsive">
        <table class="w-full" id="invoicesTable" role="table" aria-label="Invoices table">
          <thead class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 border-b-2 border-gray-200 dark:border-gray-700">
            <tr role="row">
              <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Client</th>
              <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Invoice #</th>
              <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Amount</th>
              <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Due Date</th>
              <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Status</th>
              <th scope="col" class="px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody id="invoicesTableBody" class="divide-y divide-gray-200 dark:divide-gray-700" role="rowgroup">
            <!-- Invoice rows will be inserted here dynamically -->
          </tbody>
        </table>
      </div>
      
      <!-- Empty State -->
      <div id="emptyState" class="hidden p-16 text-center" role="status" aria-live="polite">
        <div class="max-w-md mx-auto">
          <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6">
            <svg class="w-12 h-12 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-3">Ready to get started?</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-8 text-lg">Create your first invoice and start tracking payments like a pro!</p>
          <button 
            id="emptyStateAddBtn" 
            class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-3.5 rounded-lg font-medium hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl inline-flex items-center gap-2 transform hover:scale-105"
            aria-label="Add your first invoice">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            <span>Create First Invoice</span>
          </button>
          <p class="text-sm text-gray-500 dark:text-gray-500 mt-6">ğŸ’¡ Tip: Try loading demo data to see how it works!</p>
        </div>
      </div>
    </section>

  </main>

  <!-- Invoice Modal -->
  <div id="invoiceModal" class="hidden modal-premium" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block modal-content-premium">
        <form id="invoiceForm">
          <div class="modal-header-premium">
            <h3 class="text-xl font-bold text-gradient" id="modal-title">âœ¨ Create New Invoice</h3>
            <button 
              type="button" 
              id="closeModalBtn"
              class="icon-btn-premium"
              aria-label="Close modal">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          
          <div class="modal-body-premium space-y-6">
            <!-- Client Name -->
            <div class="input-group">
              <label for="clientName" class="block text-sm font-semibold mb-2">ğŸ‘¤ Client Name *</label>
              <input 
                type="text" 
                id="clientName" 
                name="clientName" 
                required
                class="input-premium"
                placeholder="Enter client name"
                autocomplete="off"
                list="clientNameSuggestions">
              <datalist id="clientNameSuggestions"></datalist>
              <p class="text-red-500 text-sm mt-1 hidden" id="clientNameError" role="alert"></p>
            </div>

            <!-- Email -->
            <div class="input-group">
              <label for="clientEmail" class="block text-sm font-semibold mb-2">ğŸ“§ Email</label>
              <input 
                type="email" 
                id="clientEmail" 
                name="clientEmail" 
                class="input-premium"
                placeholder="client@example.com"
                autocomplete="off">
              <p class="text-xs text-gray-500 mt-1">For automated payment reminders</p>
              <p class="text-red-500 text-sm mt-1 hidden" id="clientEmailError" role="alert"></p>
            </div>

            <!-- Phone -->
            <div class="input-group">
              <label for="clientPhone" class="block text-sm font-semibold mb-2">ğŸ“± Phone</label>
              <input 
                type="tel" 
                id="clientPhone" 
                name="clientPhone" 
                class="input-premium"
                placeholder="+919876543210 or 9876543210"
                autocomplete="off">
              <p class="text-xs text-gray-500 mt-1">Indian mobile number for SMS reminders</p>
              <p class="text-red-500 text-sm mt-1 hidden" id="clientPhoneError" role="alert"></p>
            </div>

            <!-- Amount -->
            <div class="input-group">
              <label for="amount" class="block text-sm font-semibold mb-2">ğŸ’° Amount (â‚¹) *</label>
              <input 
                type="number" 
                id="amount" 
                name="amount" 
                required
                min="0.01"
                step="0.01"
                class="input-premium"
                placeholder="0.00">
              <p class="text-red-500 text-sm mt-1 hidden" id="amountError" role="alert"></p>
            </div>

            <!-- Due Date -->
            <div class="input-group">
              <label for="dueDate" class="block text-sm font-semibold mb-2">ğŸ“… Due Date *</label>
              <input 
                type="date" 
                id="dueDate" 
                name="dueDate" 
                required
                class="input-premium">
              <p class="text-red-500 text-sm mt-1 hidden" id="dueDateError" role="alert"></p>
            </div>

            <!-- Payment Method -->
            <div class="input-group">
              <label for="paymentMethod" class="block text-sm font-semibold mb-2">ğŸ’³ Payment Method *</label>
              <select 
                id="paymentMethod" 
                name="paymentMethod" 
                required
                class="input-premium">
                <option value="">Select payment method</option>
                <option value="UPI">ğŸ”— UPI</option>
                <option value="Bank Transfer">ğŸ¦ Bank Transfer</option>
                <option value="PayPal">ğŸ’™ PayPal</option>
                <option value="Other">ğŸ“‹ Other</option>
              </select>
              <p class="text-red-500 text-sm mt-1 hidden" id="paymentMethodError" role="alert"></p>
            </div>

            <!-- Notes -->
            <div class="input-group">
              <label for="notes" class="block text-sm font-semibold mb-2">ğŸ“ Notes (Optional)</label>
              <textarea 
                id="notes" 
                name="notes" 
                rows="3"
                class="input-premium"
                placeholder="Add any additional notes..."
                style="resize: none;"></textarea>
            </div>
          </div>

          <div class="modal-footer-premium">
            <button 
              type="button" 
              id="cancelModalBtn"
              class="btn-premium btn-secondary"
              aria-label="Cancel">
              Cancel
            </button>
            <button 
              type="submit" 
              id="submitInvoiceBtn"
              class="btn-premium btn-primary"
              aria-label="Save invoice">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              Create Invoice
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Reminder Modal -->
  <div id="reminderModal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="reminder-modal-title" role="dialog" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
      
      <!-- Background overlay -->
      <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity modal-backdrop" aria-hidden="true"></div>

      <!-- Modal panel -->
      <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full">
        <div class="bg-white">
          <div class="px-6 py-5 border-b border-gray-200">
            <h3 class="text-lg font-medium text-gray-900" id="reminder-modal-title">Payment Reminder</h3>
          </div>
          
          <div class="px-6 py-4">
            <textarea 
              id="reminderText" 
              readonly
              rows="12"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"
              aria-label="Reminder message text"></textarea>
          </div>

          <div class="px-6 py-4 bg-gray-50 flex flex-col-reverse sm:flex-row gap-3 sm:justify-end">
            <button 
              type="button" 
              id="closeReminderBtn"
              class="w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-100 transition-colors"
              aria-label="Close reminder modal">
              Close
            </button>
            <button 
              type="button" 
              id="copyReminderBtn"
              class="w-full sm:w-auto px-6 py-2 bg-primary text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"
              aria-label="Copy reminder message to clipboard">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
              </svg>
              <span>Copy to Clipboard</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="hidden modal-premium" aria-labelledby="settings-modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block modal-content-premium" style="max-width: 700px;">
        <form id="settingsForm">
          <div class="modal-header-premium">
            <h3 class="text-xl font-bold text-gradient" id="settings-modal-title">âš™ï¸ Settings</h3>
            <button 
              type="button" 
              id="closeSettingsBtn"
              class="icon-btn-premium"
              aria-label="Close settings">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          
          <div class="modal-body-premium space-y-8">
            <!-- User Information Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
                <span class="text-2xl">ğŸ‘¤</span>
                User Information
              </h4>
              <div class="input-group">
                <label for="userName" class="block text-sm font-semibold mb-2">Your Name</label>
                <input 
                  type="text" 
                  id="userName" 
                  name="userName" 
                  class="input-premium"
                  placeholder="Enter your name">
                <p class="text-xs text-gray-500 mt-1">Used in reminder message signatures</p>
              </div>
            </div>

            <!-- Payment Details Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
                <span class="text-2xl">ğŸ’³</span>
                Payment Details
              </h4>
              <div class="space-y-4">
                <!-- UPI ID -->
                <div class="input-group">
                  <label for="upiId" class="block text-sm font-semibold mb-2">ğŸ”— UPI ID</label>
                  <input 
                    type="text" 
                    id="upiId" 
                    name="upiId" 
                    class="input-premium"
                    placeholder="yourname@upi">
                  <p class="text-xs text-gray-500 mt-1">Your UPI ID for receiving payments</p>
                </div>

                <!-- Bank Details -->
                <div class="input-group">
                  <label for="bankDetails" class="block text-sm font-semibold mb-2">ğŸ¦ Bank Account Details</label>
                  <textarea 
                    id="bankDetails" 
                    name="bankDetails" 
                    rows="3"
                    class="input-premium"
                    style="resize: none;"
                    placeholder="Account Name: Your Name&#10;Account Number: XXXX&#10;IFSC Code: XXXX&#10;Bank: Your Bank"></textarea>
                  <p class="text-xs text-gray-500 mt-1">Bank transfer details for clients</p>
                </div>

                <!-- PayPal Email -->
                <div class="input-group">
                  <label for="paypalEmail" class="block text-sm font-semibold mb-2">ğŸ’™ PayPal Email</label>
                  <input 
                    type="email" 
                    id="paypalEmail" 
                    name="paypalEmail" 
                    class="input-premium"
                    placeholder="your.email@example.com">
                  <p class="text-xs text-gray-500 mt-1">Your PayPal email for international payments</p>
                </div>
              </div>
            </div>

            <!-- Late Fee Configuration Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
                <span class="text-2xl">â°</span>
                Late Fee Configuration
              </h4>
              <div class="space-y-4">
                <!-- Enable Late Fees -->
                <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                  <input 
                    type="checkbox" 
                    id="lateFeeEnabled" 
                    name="lateFeeEnabled" 
                    class="h-5 w-5 text-primary focus:ring-primary border-gray-300 rounded">
                  <label for="lateFeeEnabled" class="text-sm font-medium">
                    Enable automatic late fee calculation
                  </label>
                </div>

                <!-- Late Fee Percentage -->
                <div class="input-group">
                  <label for="lateFeePercentage" class="block text-sm font-semibold mb-2">ğŸ“Š Late Fee Percentage (per week)</label>
                  <div class="flex items-center gap-3">
                    <input 
                      type="number" 
                      id="lateFeePercentage" 
                      name="lateFeePercentage" 
                      min="0"
                      max="100"
                      step="0.1"
                      class="input-premium w-32"
                      placeholder="1.0">
                    <span class="text-sm font-medium">% per week</span>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Default is 1% per week. Late fees are calculated on complete weeks overdue.</p>
                </div>
              </div>
            </div>

            <!-- Automated Reminder Settings Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
                <span class="text-2xl">ğŸ””</span>
                Automated Reminder Settings
              </h4>
              <div class="space-y-4">
                <!-- Enable Reminders -->
                <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                  <input 
                    type="checkbox" 
                    id="remindersEnabled" 
                    name="remindersEnabled" 
                    class="h-5 w-5 text-primary focus:ring-primary border-gray-300 rounded">
                  <label for="remindersEnabled" class="text-sm font-medium">
                    Enable automated payment reminders
                  </label>
                </div>

                <!-- Channel Selection -->
                <div class="input-group">
                  <label class="block text-sm font-semibold mb-2">ğŸ“¨ Reminder Channels</label>
                  <div class="space-y-2">
                    <div class="flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg">
                      <input 
                        type="checkbox" 
                        id="channelEmail" 
                        name="channelEmail" 
                        value="email"
                        class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                      <label for="channelEmail" class="text-sm">ğŸ“§ Email</label>
                    </div>
                    <div class="flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg">
                      <input 
                        type="checkbox" 
                        id="channelSMS" 
                        name="channelSMS" 
                        value="sms"
                        class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                      <label for="channelSMS" class="text-sm">ğŸ“± SMS</label>
                    </div>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Select at least one channel for sending reminders</p>
                </div>

                <!-- Reminder Interval -->
                <div class="input-group">
                  <label for="reminderInterval" class="block text-sm font-semibold mb-2">â±ï¸ Reminder Interval</label>
                  <div class="flex items-center gap-3">
                    <input 
                      type="number" 
                      id="reminderInterval" 
                      name="reminderInterval" 
                      min="1"
                      max="30"
                      class="input-premium w-24"
                      placeholder="3">
                    <span class="text-sm font-medium">days between reminders</span>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Minimum time between consecutive reminders (1-30 days)</p>
                </div>

                <!-- Max Reminders -->
                <div class="input-group">
                  <label for="maxReminders" class="block text-sm font-semibold mb-2">ğŸ”¢ Maximum Reminders</label>
                  <div class="flex items-center gap-3">
                    <input 
                      type="number" 
                      id="maxReminders" 
                      name="maxReminders" 
                      min="1"
                      max="20"
                      class="input-premium w-24"
                      placeholder="5">
                    <span class="text-sm font-medium">reminders per invoice</span>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Maximum number of reminders to send for each invoice (1-20)</p>
                </div>

                <!-- Business Hours -->
                <div class="input-group">
                  <label class="block text-sm font-semibold mb-2">ğŸ• Business Hours</label>
                  <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg mb-3">
                    <input 
                      type="checkbox" 
                      id="businessHoursOnly" 
                      name="businessHoursOnly" 
                      class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                    <label for="businessHoursOnly" class="text-sm font-medium">
                      Send reminders only during business hours
                    </label>
                  </div>
                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label for="businessHoursStart" class="block text-xs font-medium mb-1">Start Time</label>
                      <input 
                        type="time" 
                        id="businessHoursStart" 
                        name="businessHoursStart" 
                        class="input-premium"
                        placeholder="09:00">
                    </div>
                    <div>
                      <label for="businessHoursEnd" class="block text-xs font-medium mb-1">End Time</label>
                      <input 
                        type="time" 
                        id="businessHoursEnd" 
                        name="businessHoursEnd" 
                        class="input-premium"
                        placeholder="18:00">
                    </div>
                  </div>
                  <p class="text-xs text-gray-500 mt-1">Reminders will only be sent within these hours</p>
                </div>

                <!-- Weekend Exclusion -->
                <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                  <input 
                    type="checkbox" 
                    id="excludeWeekends" 
                    name="excludeWeekends" 
                    class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                  <label for="excludeWeekends" class="text-sm font-medium">
                    ğŸ“… Exclude weekends (Saturday & Sunday)
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer-premium">
            <button 
              type="button" 
              id="cancelSettingsBtn"
              class="btn-premium btn-secondary"
              aria-label="Cancel">
              Cancel
            </button>
            <button 
              type="submit" 
              id="submitSettingsBtn"
              class="btn-premium btn-primary"
              aria-label="Save settings">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              Save Settings
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Loading Spinner Overlay -->
  <div id="loadingOverlay" class="hidden fixed inset-0 z-50 bg-gray-900 bg-opacity-50 flex items-center justify-center" role="status" aria-live="polite">
    <div class="bg-white rounded-lg p-6 shadow-xl flex flex-col items-center gap-4">
      <div class="spinner w-12 h-12 border-4 border-primary border-t-transparent rounded-full" aria-hidden="true"></div>
      <p class="text-gray-700 font-medium" id="loadingMessage">Loading...</p>
    </div>
  </div>

  <!-- Skeleton Screen for Initial Load -->
  <div id="skeletonScreen" class="hidden" role="status" aria-live="polite" aria-label="Loading content">
    <!-- Skeleton Summary Cards -->
    <section class="mb-8" aria-label="Loading summary cards">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
        <div class="bg-white rounded-lg shadow-md p-6 animate-pulse" aria-hidden="true">
          <div class="h-4 bg-gray-200 rounded w-1/2 mb-4"></div>
          <div class="h-8 bg-gray-300 rounded w-3/4 mb-2"></div>
          <div class="h-3 bg-gray-200 rounded w-1/3"></div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 animate-pulse" aria-hidden="true">
          <div class="h-4 bg-gray-200 rounded w-1/2 mb-4"></div>
          <div class="h-8 bg-gray-300 rounded w-3/4 mb-2"></div>
          <div class="h-3 bg-gray-200 rounded w-1/3"></div>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 animate-pulse sm:col-span-2 lg:col-span-1" aria-hidden="true">
          <div class="h-4 bg-gray-200 rounded w-1/2 mb-4"></div>
          <div class="h-8 bg-gray-300 rounded w-3/4 mb-2"></div>
          <div class="h-3 bg-gray-200 rounded w-1/3"></div>
        </div>
      </div>
    </section>

    <!-- Skeleton Table -->
    <section class="bg-white rounded-lg shadow-md p-6 animate-pulse" aria-label="Loading invoice table" aria-hidden="true">
      <div class="h-6 bg-gray-200 rounded w-1/4 mb-4"></div>
      <div class="space-y-3">
        <div class="h-12 bg-gray-100 rounded"></div>
        <div class="h-12 bg-gray-100 rounded"></div>
        <div class="h-12 bg-gray-100 rounded"></div>
      </div>
    </section>
    <span class="sr-only">Loading invoice data, please wait...</span>
  </div>

  <!-- Toast Notification Container -->
  <div id="toastContainer" class="fixed bottom-4 right-4 z-50 space-y-2" aria-live="polite" aria-atomic="true">
    <!-- Toast notifications will be inserted here dynamically -->
  </div>

  <!-- Service Configuration Modal -->
  <div id="serviceConfigModal" class="hidden modal-premium" aria-labelledby="service-config-modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block modal-content-premium" style="max-width: 800px;">
        <div class="modal-header-premium">
          <h3 class="text-xl font-bold text-gradient" id="service-config-modal-title">ğŸ”§ Service Configuration</h3>
          <button 
            type="button" 
            id="closeServiceConfigBtn"
            class="icon-btn-premium"
            aria-label="Close service configuration">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        
        <div class="modal-body-premium space-y-8">
          <!-- AI Service Configuration -->
          <div class="premium-card">
            <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
              <span class="text-2xl">ğŸ¤–</span>
              AI Service Configuration
            </h4>
            <form id="aiServiceForm" class="space-y-4">
              <!-- Enable AI Service -->
              <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                <input 
                  type="checkbox" 
                  id="aiEnabled" 
                  name="aiEnabled" 
                  class="h-5 w-5 text-primary focus:ring-primary border-gray-300 rounded">
                <label for="aiEnabled" class="text-sm font-medium">
                  Enable AI message generation
                </label>
              </div>

              <!-- AI Provider -->
              <div class="input-group">
                <label for="aiProvider" class="block text-sm font-semibold mb-2">AI Provider *</label>
                <select 
                  id="aiProvider" 
                  name="aiProvider" 
                  required
                  class="input-premium">
                  <option value="openai">OpenAI</option>
                  <option value="anthropic">Anthropic (Claude)</option>
                </select>
              </div>

              <!-- AI API Key -->
              <div class="input-group">
                <label for="aiApiKey" class="block text-sm font-semibold mb-2">API Key *</label>
                <input 
                  type="password" 
                  id="aiApiKey" 
                  name="aiApiKey" 
                  required
                  class="input-premium"
                  placeholder="sk-...">
                <p class="text-xs text-gray-500 mt-1">Your API key is encrypted before storage</p>
              </div>

              <!-- AI Model -->
              <div class="input-group">
                <label for="aiModel" class="block text-sm font-semibold mb-2">Model *</label>
                <select 
                  id="aiModel" 
                  name="aiModel" 
                  required
                  class="input-premium">
                  <option value="gpt-4">GPT-4</option>
                  <option value="gpt-4-turbo">GPT-4 Turbo</option>
                  <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                </select>
              </div>

              <!-- Test AI Connection -->
              <button 
                type="button" 
                id="testAIBtn"
                class="btn-premium btn-secondary w-full"
                aria-label="Test AI connection">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Test Connection
              </button>

              <!-- Save AI Config -->
              <button 
                type="submit" 
                class="btn-premium btn-primary w-full"
                aria-label="Save AI configuration">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                Save AI Configuration
              </button>
            </form>
          </div>

          <!-- Email Service Configuration -->
          <div class="premium-card">
            <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
              <span class="text-2xl">ğŸ“§</span>
              Email Service Configuration
            </h4>
            <form id="emailServiceForm" class="space-y-4">
              <!-- Enable Email Service -->
              <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                <input 
                  type="checkbox" 
                  id="emailEnabled" 
                  name="emailEnabled" 
                  class="h-5 w-5 text-primary focus:ring-primary border-gray-300 rounded">
                <label for="emailEnabled" class="text-sm font-medium">
                  Enable email reminders
                </label>
              </div>

              <!-- Email Provider -->
              <div class="input-group">
                <label for="emailProvider" class="block text-sm font-semibold mb-2">Email Provider *</label>
                <select 
                  id="emailProvider" 
                  name="emailProvider" 
                  required
                  class="input-premium">
                  <option value="sendgrid">SendGrid</option>
                  <option value="resend">Resend</option>
                  <option value="smtp">SMTP</option>
                </select>
              </div>

              <!-- Email API Key -->
              <div class="input-group">
                <label for="emailApiKey" class="block text-sm font-semibold mb-2">API Key *</label>
                <input 
                  type="password" 
                  id="emailApiKey" 
                  name="emailApiKey" 
                  required
                  class="input-premium"
                  placeholder="SG... or re_...">
                <p class="text-xs text-gray-500 mt-1">Your API key is encrypted before storage</p>
              </div>

              <!-- Sender Email -->
              <div class="input-group">
                <label for="senderEmail" class="block text-sm font-semibold mb-2">Sender Email *</label>
                <input 
                  type="email" 
                  id="senderEmail" 
                  name="senderEmail" 
                  required
                  class="input-premium"
                  placeholder="noreply@yourdomain.com">
              </div>

              <!-- Sender Name -->
              <div class="input-group">
                <label for="senderName" class="block text-sm font-semibold mb-2">Sender Name</label>
                <input 
                  type="text" 
                  id="senderName" 
                  name="senderName" 
                  class="input-premium"
                  placeholder="Invoice Guard">
              </div>

              <!-- SMTP-specific fields (hidden by default) -->
              <div id="smtpFields" class="hidden space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
                <h5 class="text-sm font-bold">SMTP Configuration</h5>
                
                <div class="input-group">
                  <label for="smtpHost" class="block text-sm font-semibold mb-2">SMTP Host *</label>
                  <input 
                    type="text" 
                    id="smtpHost" 
                    name="smtpHost" 
                    class="input-premium"
                    placeholder="smtp.gmail.com">
                </div>

                <div class="input-group">
                  <label for="smtpPort" class="block text-sm font-semibold mb-2">SMTP Port *</label>
                  <input 
                    type="number" 
                    id="smtpPort" 
                    name="smtpPort" 
                    class="input-premium"
                    placeholder="587">
                </div>

                <div class="input-group">
                  <label for="smtpUser" class="block text-sm font-semibold mb-2">SMTP User *</label>
                  <input 
                    type="text" 
                    id="smtpUser" 
                    name="smtpUser" 
                    class="input-premium"
                    placeholder="your-email@gmail.com">
                </div>
              </div>

              <!-- Test Email Connection -->
              <button 
                type="button" 
                id="testEmailBtn"
                class="btn-premium btn-secondary w-full"
                aria-label="Test email connection">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Test Connection
              </button>

              <!-- Save Email Config -->
              <button 
                type="submit" 
                class="btn-premium btn-primary w-full"
                aria-label="Save email configuration">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                Save Email Configuration
              </button>
            </form>
          </div>

          <!-- SMS Service Configuration -->
          <div class="premium-card">
            <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
              <span class="text-2xl">ğŸ“±</span>
              SMS Service Configuration (Twilio)
            </h4>
            <form id="smsServiceForm" class="space-y-4">
              <!-- Enable SMS Service -->
              <div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                <input 
                  type="checkbox" 
                  id="smsEnabled" 
                  name="smsEnabled" 
                  class="h-5 w-5 text-primary focus:ring-primary border-gray-300 rounded">
                <label for="smsEnabled" class="text-sm font-medium">
                  Enable SMS reminders
                </label>
              </div>

              <!-- Twilio Account SID -->
              <div class="input-group">
                <label for="twilioAccountSid" class="block text-sm font-semibold mb-2">Twilio Account SID *</label>
                <input 
                  type="text" 
                  id="twilioAccountSid" 
                  name="twilioAccountSid" 
                  required
                  class="input-premium"
                  placeholder="AC...">
              </div>

              <!-- Twilio Auth Token -->
              <div class="input-group">
                <label for="twilioAuthToken" class="block text-sm font-semibold mb-2">Twilio Auth Token *</label>
                <input 
                  type="password" 
                  id="twilioAuthToken" 
                  name="twilioAuthToken" 
                  required
                  class="input-premium"
                  placeholder="Your auth token">
                <p class="text-xs text-gray-500 mt-1">Your auth token is encrypted before storage</p>
              </div>

              <!-- Twilio Phone Number -->
              <div class="input-group">
                <label for="twilioPhoneNumber" class="block text-sm font-semibold mb-2">Twilio Phone Number *</label>
                <input 
                  type="tel" 
                  id="twilioPhoneNumber" 
                  name="twilioPhoneNumber" 
                  required
                  class="input-premium"
                  placeholder="+1234567890">
                <p class="text-xs text-gray-500 mt-1">Must be in E.164 format (e.g., +1234567890)</p>
              </div>

              <!-- Test SMS Connection -->
              <button 
                type="button" 
                id="testSMSBtn"
                class="btn-premium btn-secondary w-full"
                aria-label="Test SMS connection">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Test Connection
              </button>

              <!-- Save SMS Config -->
              <button 
                type="submit" 
                class="btn-premium btn-primary w-full"
                aria-label="Save SMS configuration">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                Save SMS Configuration
              </button>
            </form>
          </div>
        </div>

        <div class="modal-footer-premium">
          <button 
            type="button" 
            id="cancelServiceConfigBtn"
            class="btn-premium btn-secondary"
            aria-label="Close">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Reminder History Modal -->
  <div id="reminderHistoryModal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="reminder-history-modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block bg-white dark:bg-gray-800 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full max-w-6xl">
        <div class="bg-white dark:bg-gray-800">
          <div class="px-6 py-5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2" id="reminder-history-modal-title">
              <span class="text-2xl">ğŸ“œ</span>
              Reminder History
            </h3>
            <button 
              type="button" 
              id="closeReminderHistoryBtn"
              class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors"
              aria-label="Close reminder history">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          
          <!-- Filters Section -->
          <div class="px-6 py-4 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
              <!-- Channel Filter -->
              <div>
                <label for="reminderChannelFilter" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Channel</label>
                <select 
                  id="reminderChannelFilter" 
                  class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm">
                  <option value="all">All Channels</option>
                  <option value="email">ğŸ“§ Email</option>
                  <option value="sms">ğŸ“± SMS</option>
                </select>
              </div>
              
              <!-- Status Filter -->
              <div>
                <label for="reminderStatusFilter" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Status</label>
                <select 
                  id="reminderStatusFilter" 
                  class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm">
                  <option value="all">All Status</option>
                  <option value="sent">âœ“ Sent</option>
                  <option value="failed">âœ— Failed</option>
                  <option value="pending">â³ Pending</option>
                </select>
              </div>
              
              <!-- Start Date -->
              <div>
                <label for="reminderStartDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Start Date</label>
                <input 
                  type="date" 
                  id="reminderStartDate" 
                  class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm">
              </div>
              
              <!-- End Date -->
              <div>
                <label for="reminderEndDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">End Date</label>
                <input 
                  type="date" 
                  id="reminderEndDate" 
                  class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm">
              </div>
            </div>
            
            <!-- Filter Actions -->
            <div class="flex gap-3 mt-4">
              <button 
                type="button" 
                id="applyReminderFiltersBtn"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
                </svg>
                Apply Filters
              </button>
              <button 
                type="button" 
                id="clearReminderFiltersBtn"
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm">
                Clear Filters
              </button>
            </div>
          </div>
          
          <!-- Table Section -->
          <div class="px-6 py-4 overflow-x-auto" style="max-height: 500px;">
            <table class="w-full" id="reminderHistoryTable">
              <thead class="bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 sticky top-0">
                <tr>
                  <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Date/Time</th>
                  <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Invoice</th>
                  <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Channel</th>
                  <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Status</th>
                  <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Level</th>
                  <th scope="col" class="px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Cost</th>
                  <th scope="col" class="px-4 py-3 text-right text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody id="reminderHistoryTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                <!-- Reminder history rows will be inserted here -->
              </tbody>
            </table>
            
            <!-- Empty State -->
            <div id="reminderHistoryEmptyState" class="hidden py-12 text-center">
              <div class="max-w-md mx-auto">
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                  <svg class="w-10 h-10 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                  </svg>
                </div>
                <h4 class="text-lg font-bold text-gray-900 dark:text-white mb-2">No Reminders Yet</h4>
                <p class="text-gray-600 dark:text-gray-400 text-sm">Reminder history will appear here once automated reminders are sent.</p>
              </div>
            </div>
          </div>

          <div class="px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 flex justify-end">
            <button 
              type="button" 
              id="cancelReminderHistoryBtn"
              class="px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
              aria-label="Close">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Reminder Message Modal -->
  <div id="reminderMessageModal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="reminder-message-modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block bg-white dark:bg-gray-800 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full max-w-2xl">
        <div class="bg-white dark:bg-gray-800">
          <div class="px-6 py-5 border-b border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-bold text-gray-900 dark:text-white" id="reminder-message-modal-title">Reminder Message</h3>
          </div>
          
          <div class="px-6 py-4">
            <!-- Message Content -->
            <div class="mb-4">
              <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Message</label>
              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                <pre id="reminderMessageContent" class="text-sm text-gray-900 dark:text-gray-100 whitespace-pre-wrap font-sans"></pre>
              </div>
            </div>
            
            <!-- Metadata -->
            <div class="mb-4">
              <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Details</label>
              <div id="reminderMessageMetadata" class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100">
                <!-- Metadata will be inserted here -->
              </div>
            </div>
          </div>

          <div class="px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 flex justify-end">
            <button 
              type="button" 
              id="closeReminderMessageBtn"
              class="px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
              aria-label="Close">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cost Dashboard Modal -->
  <div id="costDashboardModal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="cost-dashboard-modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block bg-white dark:bg-gray-800 rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full max-w-6xl">
        <div class="bg-white dark:bg-gray-800">
          <div class="px-6 py-5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2" id="cost-dashboard-modal-title">
              <span class="text-2xl">ğŸ’°</span>
              Cost Dashboard
            </h3>
            <div class="flex items-center gap-2">
              <button 
                type="button" 
                id="refreshDashboardBtn"
                class="p-2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors"
                aria-label="Refresh dashboard"
                title="Refresh dashboard">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
              </button>
              <button 
                type="button" 
                id="closeCostDashboardBtn"
                class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 transition-colors"
                aria-label="Close cost dashboard">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
          </div>
          
          <div class="px-6 py-6 space-y-6 overflow-y-auto" style="max-height: 70vh;">
            <!-- Monthly Costs Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                <span class="text-2xl">ğŸ“Š</span>
                Monthly Costs Breakdown
              </h4>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <!-- Total Cost -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
                  <p class="text-sm font-medium text-blue-700 dark:text-blue-300 mb-1">Total Monthly Cost</p>
                  <p id="totalMonthlyCost" class="text-3xl font-bold text-blue-900 dark:text-blue-100">$0.00</p>
                </div>
                
                <!-- Email Cost -->
                <div class="bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-4 border border-green-200 dark:border-green-800">
                  <p class="text-sm font-medium text-green-700 dark:text-green-300 mb-1">ğŸ“§ Email Cost</p>
                  <p id="emailCost" class="text-2xl font-bold text-green-900 dark:text-green-100">$0.00</p>
                  <p id="emailCount" class="text-xs text-green-600 dark:text-green-400 mt-1">0 sent</p>
                </div>
                
                <!-- SMS Cost -->
                <div class="bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800">
                  <p class="text-sm font-medium text-purple-700 dark:text-purple-300 mb-1">ğŸ“± SMS Cost</p>
                  <p id="smsCost" class="text-2xl font-bold text-purple-900 dark:text-purple-100">$0.00</p>
                  <p id="smsCount" class="text-xs text-purple-600 dark:text-purple-400 mt-1">0 sent</p>
                </div>
              </div>
              
              <!-- Budget Progress -->
              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Budget Usage</span>
                  <div class="text-right">
                    <span class="text-sm font-bold text-gray-900 dark:text-white">
                      <span id="budgetRemaining">$0.00</span> remaining
                    </span>
                    <span class="text-xs text-gray-500 dark:text-gray-400 ml-2">
                      of <span id="budgetLimit">$0.00</span>
                    </span>
                  </div>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden">
                  <div id="budgetProgress" class="bg-green-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                </div>
                <p id="budgetWarning" class="hidden text-sm text-yellow-600 dark:text-yellow-400 mt-2 font-medium"></p>
              </div>
            </div>
            
            <!-- Usage Statistics Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                <span class="text-2xl">ğŸ“ˆ</span>
                Usage Statistics (This Month)
              </h4>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Overall Stats -->
                <div class="space-y-4">
                  <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700">
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Total Reminders Sent</span>
                    <span id="totalRemindersSent" class="text-xl font-bold text-gray-900 dark:text-white">0</span>
                  </div>
                  <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700">
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Success Rate</span>
                    <span id="successRate" class="text-xl font-bold text-green-600 dark:text-green-400">0%</span>
                  </div>
                </div>
                
                <!-- Channel Breakdown -->
                <div class="space-y-4">
                  <div class="p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700">
                    <p class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ğŸ“§ Email</p>
                    <div class="flex justify-between text-sm">
                      <span class="text-gray-600 dark:text-gray-400">Sent: <span id="emailSent" class="font-semibold text-gray-900 dark:text-white">0</span></span>
                      <span class="text-gray-600 dark:text-gray-400">Failed: <span id="emailFailed" class="font-semibold text-red-600 dark:text-red-400">0</span></span>
                    </div>
                  </div>
                  <div class="p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700">
                    <p class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ğŸ“± SMS</p>
                    <div class="flex justify-between text-sm">
                      <span class="text-gray-600 dark:text-gray-400">Sent: <span id="smsSent" class="font-semibold text-gray-900 dark:text-white">0</span></span>
                      <span class="text-gray-600 dark:text-gray-400">Failed: <span id="smsFailed" class="font-semibold text-red-600 dark:text-red-400">0</span></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Budget Configuration Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                <span class="text-2xl">âš™ï¸</span>
                Budget Configuration
              </h4>
              
              <form id="budgetConfigForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <!-- Monthly Budget Limit -->
                  <div class="input-group">
                    <label for="monthlyBudgetLimit" class="block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300">ğŸ’µ Monthly Budget Limit (USD)</label>
                    <input 
                      type="number" 
                      id="monthlyBudgetLimit" 
                      name="monthlyBudgetLimit" 
                      min="0"
                      step="0.01"
                      required
                      class="input-premium"
                      placeholder="50.00">
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Set to 0 for unlimited budget</p>
                  </div>
                  
                  <!-- Warning Threshold -->
                  <div class="input-group">
                    <label for="budgetWarningThreshold" class="block text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300">âš ï¸ Warning Threshold (%)</label>
                    <input 
                      type="number" 
                      id="budgetWarningThreshold" 
                      name="budgetWarningThreshold" 
                      min="0"
                      max="100"
                      step="1"
                      required
                      class="input-premium"
                      placeholder="80">
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Get notified when budget usage reaches this percentage</p>
                  </div>
                </div>
                
                <button 
                  type="submit" 
                  class="btn-premium btn-primary w-full md:w-auto"
                  aria-label="Save budget configuration">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                  Save Budget Configuration
                </button>
              </form>
            </div>
            
            <!-- Service Credit Balances Section -->
            <div class="premium-card">
              <h4 class="text-lg font-bold mb-4 flex items-center gap-2 text-gray-900 dark:text-white">
                <span class="text-2xl">ğŸ’³</span>
                Service Credit Balances
              </h4>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- SMS Balance -->
                <div class="bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800">
                  <p class="text-sm font-medium text-indigo-700 dark:text-indigo-300 mb-1">ğŸ“± Twilio SMS Balance</p>
                  <p id="smsBalance" class="text-2xl font-bold text-indigo-900 dark:text-indigo-100">$0.00</p>
                  <p class="text-xs text-indigo-600 dark:text-indigo-400 mt-1">Check Twilio dashboard for details</p>
                </div>
                
                <!-- Placeholder for future services -->
                <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 flex items-center justify-center">
                  <p class="text-sm text-gray-500 dark:text-gray-400 text-center">Additional service balances will appear here</p>
                </div>
                
                <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700 flex items-center justify-center">
                  <p class="text-sm text-gray-500 dark:text-gray-400 text-center">Additional service balances will appear here</p>
                </div>
              </div>
            </div>
            
            <!-- Cost Warnings -->
            <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4">
              <div class="flex items-start gap-3">
                <svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                </svg>
                <div>
                  <h5 class="text-sm font-bold text-yellow-800 dark:text-yellow-200 mb-1">Cost Management Tips</h5>
                  <ul class="text-xs text-yellow-700 dark:text-yellow-300 space-y-1">
                    <li>â€¢ Set a monthly budget limit to prevent unexpected costs</li>
                    <li>â€¢ Monitor your usage regularly to optimize reminder frequency</li>
                    <li>â€¢ Email reminders are typically more cost-effective than SMS</li>
                    <li>â€¢ Consider adjusting reminder intervals to reduce costs</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 flex justify-end">
            <button 
              type="button" 
              id="closeCostDashboardBtnFooter"
              class="px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
              aria-label="Close">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Test Preview Modal -->
  <div id="testPreviewModal" class="hidden modal-premium" aria-labelledby="test-preview-modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="modal-backdrop" aria-hidden="true"></div>
    
    <div class="flex items-center justify-center min-h-screen px-4">
      <!-- Modal panel -->
      <div class="inline-block modal-content-premium" style="max-width: 800px;">
        <div class="modal-header-premium">
          <h3 class="text-xl font-bold text-gradient" id="test-preview-modal-title">ğŸ§ª Test & Preview</h3>
          <button 
            type="button" 
            id="closeTestPreviewBtn"
            class="icon-btn-premium"
            aria-label="Close test preview">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        
        <div class="modal-body-premium space-y-6">
          <!-- AI Message Preview Section -->
          <div class="premium-card">
            <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
              <span class="text-2xl">ğŸ¤–</span>
              AI Message Preview
            </h4>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
              Generate a sample AI reminder message to see how it looks before enabling automation.
            </p>
            
            <!-- Escalation Level Selector -->
            <div class="input-group mb-4">
              <label for="testEscalationLevel" class="block text-sm font-semibold mb-2">Escalation Level</label>
              <select 
                id="testEscalationLevel" 
                class="input-premium">
                <option value="gentle">ğŸ˜Š Gentle (1-3 days overdue)</option>
                <option value="firm">ğŸ“¢ Firm (4-7 days overdue)</option>
                <option value="urgent">ğŸš¨ Urgent (8+ days overdue)</option>
              </select>
            </div>
            
            <button 
              type="button" 
              id="testAIMessageBtn"
              class="btn-premium btn-primary w-full mb-4"
              aria-label="Generate test AI message">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              Generate Test Message
            </button>
            
            <!-- Message Preview Area -->
            <div id="aiMessagePreview" class="hidden">
              <label class="block text-sm font-semibold mb-2">Generated Message:</label>
              <div class="bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4">
                <pre id="aiMessageText" class="text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap font-sans"></pre>
              </div>
              <div class="mt-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
                <span id="aiMessageMeta"></span>
                <button 
                  type="button" 
                  id="copyAIMessageBtn"
                  class="text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                  </svg>
                  Copy
                </button>
              </div>
            </div>
          </div>

          <!-- Test Email Section -->
          <div class="premium-card">
            <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
              <span class="text-2xl">ğŸ“§</span>
              Test Email Delivery
            </h4>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
              Send a test email to verify your email service configuration.
            </p>
            
            <div class="input-group mb-4">
              <label for="testEmailAddress" class="block text-sm font-semibold mb-2">Recipient Email *</label>
              <input 
                type="email" 
                id="testEmailAddress" 
                class="input-premium"
                placeholder="your-email@example.com"
                required>
              <p class="text-xs text-gray-500 mt-1">Enter your email address to receive the test</p>
            </div>
            
            <button 
              type="button" 
              id="sendTestEmailBtn"
              class="btn-premium btn-primary w-full"
              aria-label="Send test email">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
              </svg>
              Send Test Email
            </button>
            
            <!-- Email Test Result -->
            <div id="emailTestResult" class="hidden mt-4"></div>
          </div>

          <!-- Test SMS Section -->
          <div class="premium-card">
            <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
              <span class="text-2xl">ğŸ“±</span>
              Test SMS Delivery
            </h4>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
              Send a test SMS to verify your Twilio configuration.
            </p>
            
            <div class="input-group mb-4">
              <label for="testPhoneNumber" class="block text-sm font-semibold mb-2">Recipient Phone *</label>
              <input 
                type="tel" 
                id="testPhoneNumber" 
                class="input-premium"
                placeholder="+919876543210"
                required>
              <p class="text-xs text-gray-500 mt-1">Enter phone number in E.164 format (e.g., +919876543210)</p>
            </div>
            
            <button 
              type="button" 
              id="sendTestSMSBtn"
              class="btn-premium btn-primary w-full"
              aria-label="Send test SMS">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
              </svg>
              Send Test SMS
            </button>
            
            <!-- SMS Test Result -->
            <div id="smsTestResult" class="hidden mt-4"></div>
          </div>

          <!-- Service Status Overview -->
          <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
            <div class="flex items-start gap-3">
              <svg class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <div>
                <h5 class="text-sm font-bold text-blue-800 dark:text-blue-200 mb-1">Testing Tips</h5>
                <ul class="text-xs text-blue-700 dark:text-blue-300 space-y-1">
                  <li>â€¢ Make sure you've configured your services in the Service Configuration panel first</li>
                  <li>â€¢ Test messages use actual API calls and may incur small costs</li>
                  <li>â€¢ Check your spam folder if you don't receive the test email</li>
                  <li>â€¢ SMS delivery may take a few seconds depending on your carrier</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer-premium">
          <button 
            type="button" 
            id="closeTestPreviewBtnFooter"
            class="btn-premium btn-secondary"
            aria-label="Close">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Modules -->
  <script type="module" src="js/app.js"></script>

</body>
</html>
